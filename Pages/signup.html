<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../Assets/Css/signup.css">
</head>

<body>
    <div class="register">
        <div class="head">
            <a href="../Pages/dashboard.html"><i class="fa-solid fa-arrow-left"></i></a>
            <h5>Already member?<a href="#">Sign in</a></h5>
        </div>
        <div class="h2"><h2>Sign up</h2></div>

        <form action=""  id="form">
            <label for="first_name">First Name :</label>
            <input type="text" name="first_name" id="first_name" placeholder="first_name"  required><br>

            <label for="last_name">Last Name :</label>
            <input type="text" name="last_name" id="last_name" placeholder="last_name"  required><br>
    
            <label for="email">Email :</label>
            <input type="email" name="email" id="email" placeholder="Email" required><br>

            <label for="phone_number">Phone Number :</label>  
            <input type="number" name="phone_number" id="phone_number" placeholder="Phone Number" required><br> 

            <label for="age">D.O.B :</label>
            <input type="date" name="age" id="age" required><br>


            <label for="password">Password :</label>
            <input type="password" name="password" id="password" placeholder="Password" required><br>


            <label for="password">CONFIRM PASSWORD :</label>
            <input type="password" name="password" id="confirm_password" placeholder="Confirm Password" required><br>

            <button type="button" id="btn">Sign up</button>

        </form>

    </div>

    <script src="https://kit.fontawesome.com/ee40c53027.js" crossorigin="anonymous" integrity="">
    </script>

<script>
      function signup() {

      // getting values from user
      const first_name = document.getElementById("first_name").value
      const last_name = document.getElementById("last_name").value
      const email = document.getElementById("email").value
      const phone_number = document.getElementById("phone_number").value
      const password = document.getElementById("password").value
      const confirm_password = document.getElementById("confirm_password").value


      //  initiating arr and objects
      let user;
      let res;
      user = JSON.parse(localStorage.getItem("array")) ?? [];


    if(password==confirm_password){
      if (user == "") {

        let user_data = {
          "first_name": first_name,
          "last_name": last_name,
          "email": email,
          "password": password,
          "phone": phone_number
        }
        user.push(user_data)
        localStorage.setItem("array", JSON.stringify(user))
        window.location.href = "login.html"
      }
      else {
        let check = JSON.parse(localStorage.getItem("array"))
        check.find(e => {
          if (e["email"] == email) {
            return res = 1
          }
        })
        if (res == 1) {
          alert("email already taken")
        }
        else {
          let user_data = {
            "first_name": first_name,
            "last_name": last_name,
            "email": email,
            "password": password
          }
          user.push(user_data)
          localStorage.setItem("array", JSON.stringify(user))
          window.location.href = "login.html"
        }
      }
    }
    else{
    alert("password is not matched")
  }
  }
  const form = document.getElementById("btn");
    form.addEventListener("submit", e => {
      e.preventDefault();
      signup()
    })



  </script>

</body>

</html>